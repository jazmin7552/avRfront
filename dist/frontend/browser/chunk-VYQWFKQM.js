import{a as H}from"./chunk-75LVEPVR.js";import{a as J}from"./chunk-IRBKGEKH.js";import{a as G}from"./chunk-3KOUY4YN.js";import{a as Y}from"./chunk-2QYJB2GK.js";import{a as q}from"./chunk-AFD7EEFG.js";import"./chunk-XQHYLHBR.js";import{a as j,c as z,f as B,k as L,l as U,m as W,s as R}from"./chunk-ZOGK2PJU.js";import{$ as u,B as d,Ba as $,Da as A,F as v,G as T,K as _,O as p,P as o,Q as n,R as k,S as x,T as b,U as l,X as S,Z as a,_ as C,aa as I,ba as M,ca as O,da as P,ga as f,ha as h,n as y,q as E,qa as D,ra as V,s,t as m,ta as N,ua as F}from"./chunk-BCLJKQU2.js";var w=class r{constructor(t){this.api=t}endpoint="productos";getAll(){return this.api.get(this.endpoint)}getById(t){return this.api.get(`${this.endpoint}/${t}`)}create(t){return this.api.post(this.endpoint,t)}update(t,e){return this.api.put(`${this.endpoint}/${t}`,e)}delete(t){return this.api.delete(`${this.endpoint}/${t}`)}updateStock(t,e,c){return this.api.put(`${this.endpoint}/${t}/stock`,{cantidad:e,operacion:c})}toggleEstado(t,e){return this.api.put(`${this.endpoint}/${t}/estado`,{estado:e})}static \u0275fac=function(e){return new(e||r)(E(Y))};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})};function Z(r,t){if(r&1&&(o(0,"span",18),a(1),n()),r&2){let e=l();d(),u(" ",e.mesaNumero," ")}}function ee(r,t){if(r&1&&(o(0,"span",18),a(1),n()),r&2){let e=l();d(),u(" \u{1F464} ",e.meseroNombre," ")}}function te(r,t){if(r&1){let e=x();o(0,"button",19),b("click",function(){s(e);let i=l();return m(i.limpiarCarrito())}),a(1," \u{1F5D1}\uFE0F Limpiar "),n()}}function oe(r,t){r&1&&(o(0,"div",20),k(1,"div",21),o(2,"p"),a(3,"Cargando productos..."),n()())}function ne(r,t){if(r&1){let e=x();o(0,"button",29),b("click",function(){let i=s(e).$implicit,g=l(2);return m(g.filtrarPorCategoria(i.idCategoria))}),a(1),n()}if(r&2){let e=t.$implicit,c=l(2);S("active",c.categoriaSeleccionada===e.idCategoria),d(),u(" ",e.nombre," ")}}function re(r,t){if(r&1&&(o(0,"p",53),a(1),n()),r&2){let e=l().$implicit;d(),u(" ",e.descripcion," ")}}function ie(r,t){if(r&1){let e=x();o(0,"div",42)(1,"div",43),b("click",function(){let i=s(e).$implicit,g=l(2);return m(g.agregarAlCarrito(i))}),o(2,"div",44)(3,"div",45)(4,"span",46),a(5,"\u{1F37D}\uFE0F"),n()(),o(6,"div",47)(7,"h3",48),a(8),n(),_(9,re,2,1,"p",49),o(10,"div",50)(11,"span",51),a(12),f(13,"number"),n(),o(14,"span",52),a(15," + Agregar "),n()()()()()()}if(r&2){let e=t.$implicit;d(8),u(" ",e.nombre," "),d(),p("ngIf",e.descripcion),d(3),u(" $",h(13,3,e.precio,"1.0-0")," ")}}function ae(r,t){r&1&&(o(0,"div",54)(1,"div",55)(2,"p",11),a(3,"No se encontraron productos"),n()()())}function ce(r,t){if(r&1&&(o(0,"option",62),a(1),n()),r&2){let e=t.$implicit;p("value",e.idUsuario),d(),u(" ",e.nombre||e.nombreCompleto||"Cocinero #"+e.idUsuario," ")}}function de(r,t){r&1&&(o(0,"p",63),a(1," \u26A0\uFE0F Debes seleccionar un cocinero para continuar "),n())}function le(r,t){if(r&1){let e=x();o(0,"div",56)(1,"label",57),a(2," \u{1F468}\u200D\u{1F373} Asignar a cocinero: "),n(),o(3,"select",58),P("ngModelChange",function(i){s(e);let g=l(2);return O(g.cocineroSeleccionado,i)||(g.cocineroSeleccionado=i),m(i)}),o(4,"option",59),a(5,"-- Selecciona un cocinero --"),n(),_(6,ce,2,2,"option",60),n(),_(7,de,2,0,"p",61),n()}if(r&2){let e=l(2);d(3),M("ngModel",e.cocineroSeleccionado),d(3),p("ngForOf",e.cocineros),d(),p("ngIf",!e.cocineroSeleccionado)}}function se(r,t){r&1&&(o(0,"div",64)(1,"p",65),a(2,"El carrito est\xE1 vac\xEDo"),n(),o(3,"span",66),a(4,"\u{1F37D}\uFE0F"),n()())}function me(r,t){if(r&1&&(o(0,"div",82)(1,"small"),a(2),n()()),r&2){let e=l().$implicit;d(2),u("\u{1F4CC} ",e.observaciones)}}function pe(r,t){if(r&1){let e=x();o(0,"div",69)(1,"div",70)(2,"h4",71),a(3),n(),o(4,"button",72),b("click",function(){let i=s(e).$implicit,g=l(3);return m(g.eliminarDelCarrito(i))}),a(5," \u2715 "),n()(),o(6,"div",73)(7,"span"),a(8),f(9,"number"),n()(),o(10,"div",74)(11,"div",75)(12,"button",76),b("click",function(){let i=s(e).$implicit,g=l(3);return m(g.disminuirCantidad(i))}),a(13," \u2212 "),n(),o(14,"span",77),a(15),n(),o(16,"button",76),b("click",function(){let i=s(e).$implicit,g=l(3);return m(g.aumentarCantidad(i))}),a(17," + "),n()(),o(18,"button",78),b("click",function(){let i=s(e).$implicit,g=l(3);return m(g.abrirModalObservaciones(i))}),o(19,"small"),a(20),n()()(),_(21,me,3,1,"div",79),o(22,"div",80)(23,"strong",81),a(24),f(25,"number"),n()()()}if(r&2){let e=t.$implicit;d(3),C(e.producto.nombre),d(5),u("$",h(9,6,e.producto.precio,"1.0-0")),d(7),C(e.cantidad),d(5),u("\u{1F4DD} ",e.observaciones?"Editar":"Agregar"," nota"),d(),p("ngIf",e.observaciones),d(3),u("Subtotal: $",h(25,9,e.subtotal,"1.0-0"))}}function be(r,t){if(r&1&&(o(0,"div",67),_(1,pe,26,12,"div",68),n()),r&2){let e=l(2);d(),p("ngForOf",e.carrito)}}function ge(r,t){if(r&1){let e=x();o(0,"div",83)(1,"div",84)(2,"span",85),a(3,"TOTAL:"),n(),o(4,"span",86),a(5),f(6,"number"),n()(),o(7,"div",87)(8,"button",88),b("click",function(){s(e);let i=l(2);return m(i.cancelar())}),a(9," Cancelar "),n(),o(10,"button",89),b("click",function(){s(e);let i=l(2);return m(i.prepararEnvioComanda())}),a(11," Enviar Comanda "),n()()()}if(r&2){let e=l(2);d(5),u("$",h(6,2,e.total,"1.0-0")),d(5),p("disabled",!e.cocineroSeleccionado)}}function ue(r,t){if(r&1){let e=x();o(0,"div",22)(1,"div",23)(2,"div",24)(3,"div",8)(4,"div",25)(5,"div",26)(6,"input",27),P("ngModelChange",function(i){s(e);let g=l();return O(g.busqueda,i)||(g.busqueda=i),m(i)}),b("input",function(){s(e);let i=l();return m(i.buscarProducto())}),n()(),o(7,"div",28)(8,"button",29),b("click",function(){s(e);let i=l();return m(i.filtrarPorCategoria(null))}),a(9," Todos "),n(),_(10,ne,2,3,"button",30),n(),o(11,"div",31),_(12,ie,16,6,"div",32)(13,ae,4,0,"div",33),n()()(),o(14,"div",34)(15,"div",35)(16,"div",36)(17,"h2",37),a(18,"\u{1F6D2} Carrito de Pedido"),n(),_(19,le,8,3,"div",38)(20,se,5,0,"div",39)(21,be,2,1,"div",40)(22,ge,12,5,"div",41),n()()()()()()}if(r&2){let e=l();d(6),M("ngModel",e.busqueda),d(2),S("active",e.categoriaSeleccionada===null),d(2),p("ngForOf",e.categorias),d(2),p("ngForOf",e.productosFiltrados),d(),p("ngIf",e.productosFiltrados.length===0),d(6),p("ngIf",e.carrito.length>0),d(),p("ngIf",e.carrito.length===0),d(),p("ngIf",e.carrito.length>0),d(),p("ngIf",e.carrito.length>0)}}function _e(r,t){if(r&1){let e=x();o(0,"div",90),b("click",function(){s(e);let i=l();return m(i.cerrarModalObservaciones())}),o(1,"div",91),b("click",function(i){return s(e),m(i.stopPropagation())}),o(2,"div",92)(3,"h3",93),a(4,"\u{1F4DD} Observaciones"),n(),o(5,"button",94),b("click",function(){s(e);let i=l();return m(i.cerrarModalObservaciones())}),a(6," \u2715 "),n()(),o(7,"div",95)(8,"textarea",96),P("ngModelChange",function(i){s(e);let g=l();return O(g.observacionesTemporal,i)||(g.observacionesTemporal=i),m(i)}),n()(),o(9,"div",97)(10,"button",98),b("click",function(){s(e);let i=l();return m(i.cerrarModalObservaciones())}),a(11," Cancelar "),n(),o(12,"button",99),b("click",function(){s(e);let i=l();return m(i.guardarObservaciones())}),a(13," Guardar "),n()()()()}if(r&2){let e=l();d(8),M("ngModel",e.observacionesTemporal)}}function xe(r,t){if(r&1&&(o(0,"span",111),a(1),n()),r&2){let e=l().$implicit;d(),u(" (",e.observaciones,") ")}}function ve(r,t){if(r&1&&(o(0,"li",65),a(1),_(2,xe,2,1,"span",110),n()),r&2){let e=t.$implicit;d(),I(" ",e.cantidad,"x ",e.producto.nombre," "),d(),p("ngIf",e.observaciones)}}function Ce(r,t){if(r&1){let e=x();o(0,"div",90),b("click",function(){s(e);let i=l();return m(i.cerrarModalConfirmacion())}),o(1,"div",100),b("click",function(i){return s(e),m(i.stopPropagation())}),o(2,"div",92)(3,"h3",93),a(4,"\u2713 Confirmar Comanda"),n(),o(5,"button",94),b("click",function(){s(e);let i=l();return m(i.cerrarModalConfirmacion())}),a(6," \u2715 "),n()(),o(7,"div",95)(8,"div",101)(9,"div",102)(10,"strong"),a(11,"Mesa:"),n(),o(12,"span"),a(13),n()(),o(14,"div",102)(15,"strong"),a(16,"Mesero:"),n(),o(17,"span"),a(18),n()(),o(19,"div",102)(20,"strong"),a(21,"Cocinero:"),n(),o(22,"span"),a(23),n()(),o(24,"div",102)(25,"strong"),a(26,"Items:"),n(),o(27,"span"),a(28),n()(),o(29,"div",103)(30,"strong"),a(31,"TOTAL:"),n(),o(32,"strong",104),a(33),f(34,"number"),n()()(),o(35,"div",105)(36,"h4",106),a(37,"Detalle del pedido:"),n(),o(38,"ul",107),_(39,ve,3,3,"li",108),n()(),o(40,"p",109),a(41," \xBFConfirmas que deseas enviar esta comanda? "),n()(),o(42,"div",97)(43,"button",98),b("click",function(){s(e);let i=l();return m(i.cerrarModalConfirmacion())}),a(44," Volver "),n(),o(45,"button",99),b("click",function(){s(e);let i=l();return m(i.confirmarEnvioComanda())}),a(46," \u2713 Confirmar y Enviar "),n()()()()}if(r&2){let e=l();d(13),C(e.mesaNumero),d(5),C(e.meseroNombre),d(5),C(e.obtenerNombreCocinero()),d(5),u("",e.carrito.length," productos"),d(5),u("$",h(34,6,e.total,"1.0-0")),d(6),p("ngForOf",e.carrito)}}var K=class r{constructor(t,e,c,i,g,fe,he){this.productoService=t;this.comandaService=e;this.mesaService=c;this.categoriaService=i;this.router=g;this.route=fe;this.authService=he}productos=[];categorias=[];productosFiltrados=[];carrito=[];idMesa=null;mesa=null;mesaNumero="";categoriaSeleccionada=null;busqueda="";loading=!0;total=0;mostrarModalObservaciones=!1;itemEditando=null;observacionesTemporal="";meseroNombre="";cocineros=[];cocineroSeleccionado="";mostrarModalConfirmacion=!1;ngOnInit(){this.meseroNombre=this.obtenerNombreMesero(),this.cargarCocineros(),this.route.params.subscribe(t=>{t.idMesa?(this.idMesa=+t.idMesa,this.cargarMesa()):(alert("Debe seleccionar una mesa primero"),this.router.navigate(["/mesero/dashboard"]))}),this.cargarDatos()}cargarMesa(){this.idMesa&&this.mesaService.getById(this.idMesa).subscribe({next:t=>{this.mesa=t,this.mesaNumero=t.numeroMesa||`Mesa ${this.idMesa}`},error:t=>{console.error("Error al cargar mesa:",t),alert("Error al cargar la mesa"),this.router.navigate(["/mesero/dashboard"])}})}cargarDatos(){this.loading=!0,this.categoriaService.getAll().subscribe({next:t=>{this.categorias=t},error:t=>{console.error("Error al cargar categor\xEDas:",t)}}),this.productoService.getAll().subscribe({next:t=>{this.productos=t,this.productosFiltrados=t,this.loading=!1},error:t=>{console.error("Error al cargar productos:",t),this.loading=!1}})}cargarCocineros(){this.authService.getAllUsuarios().subscribe({next:t=>{this.cocineros=t.filter(e=>e.rol==="COCINERO"||e.rolId===3||e.rolNombre==="COCINERO"),console.log("\u2705 Cocineros cargados:",this.cocineros),this.cocineros.length===0&&(console.warn("\u26A0\uFE0F No se encontraron cocineros"),alert("No hay cocineros disponibles. Contacta al administrador."))},error:t=>{console.error("\u274C Error al cargar usuarios:",t),alert("No se pudieron cargar los cocineros. Contacta al administrador.")}})}filtrarPorCategoria(t){this.categoriaSeleccionada=t||null,this.aplicarFiltros()}buscarProducto(){this.aplicarFiltros()}enviarComanda(){if(!this.idMesa||!this.mesa)return;let t=this.obtenerIdMesero();t&&this.mesaService.cambiarEstado(this.idMesa,2).subscribe({next:()=>{console.log("\u2705 Mesa cambiada a OCUPADA");let e={idComanda:0,fecha:new Date().toISOString(),mesaId:this.idMesa,mesaUbicacion:this.mesa.numeroMesa||`Mesa ${this.idMesa}`,meseroId:String(t),meseroNombre:this.obtenerNombreMesero(),cocineroId:this.cocineroSeleccionado?String(this.cocineroSeleccionado):"",cocineroNombre:this.cocineroSeleccionado?this.obtenerNombreCocinero():"",estadoId:4,estadoNombre:"PENDIENTE",detalles:this.carrito.map(c=>({idDetalleComanda:0,comandaId:0,productoId:c.producto.idProducto,productoNombre:c.producto.nombre,precioUnitario:c.producto.precio,cantidad:c.cantidad,subtotal:c.subtotal})),total:this.total};console.log("\u{1F4E4} Enviando comanda:",e),this.comandaService.create(e).subscribe({next:()=>{console.log("\u2705 Comanda creada exitosamente"),alert("\xA1Comanda enviada exitosamente! \u2705"),this.router.navigate(["/mesero/dashboard"])},error:c=>{console.error("\u274C Error al crear comanda:",c),this.mesaService.cambiarEstado(this.idMesa,1).subscribe({next:()=>console.log("Mesa revertida a DISPONIBLE"),error:i=>console.error("Error al revertir mesa:",i)}),alert(`Error al enviar la comanda: ${c.error?.message||"Error desconocido"}`)}})},error:e=>{console.error("\u274C Error al cambiar estado mesa:",e),alert("Error al ocupar la mesa. No se puede crear la comanda.")}})}aplicarFiltros(){let t=[...this.productos];if(this.categoriaSeleccionada&&(t=t.filter(e=>e.idCategoria===this.categoriaSeleccionada)),this.busqueda.trim()){let e=this.busqueda.toLowerCase();t=t.filter(c=>c.nombre.toLowerCase().includes(e)||c.descripcion&&c.descripcion.toLowerCase().includes(e))}this.productosFiltrados=t}agregarAlCarrito(t){let e=this.carrito.find(c=>c.producto.idProducto===t.idProducto);e?(e.cantidad++,e.subtotal=e.cantidad*e.producto.precio):this.carrito.push({producto:t,cantidad:1,subtotal:t.precio,observaciones:""}),this.calcularTotal()}aumentarCantidad(t){t.cantidad++,t.subtotal=t.cantidad*t.producto.precio,this.calcularTotal()}disminuirCantidad(t){t.cantidad>1&&(t.cantidad--,t.subtotal=t.cantidad*t.producto.precio,this.calcularTotal())}eliminarDelCarrito(t){let e=this.carrito.indexOf(t);e>-1&&(this.carrito.splice(e,1),this.calcularTotal())}abrirModalObservaciones(t){this.itemEditando=t,this.observacionesTemporal=t.observaciones||"",this.mostrarModalObservaciones=!0}guardarObservaciones(){this.itemEditando&&(this.itemEditando.observaciones=this.observacionesTemporal),this.cerrarModalObservaciones()}cerrarModalObservaciones(){this.mostrarModalObservaciones=!1,this.itemEditando=null,this.observacionesTemporal=""}calcularTotal(){this.total=this.carrito.reduce((t,e)=>t+e.subtotal,0)}obtenerIdMesero(){let t=this.authService.getIdUsuario();return t||(console.error("\u274C No se pudo obtener el ID del mesero"),alert("Error: No se encontr\xF3 la sesi\xF3n del usuario."),"")}obtenerNombreMesero(){return this.authService.getUsuario()?.nombre||"Mesero"}cancelar(){this.carrito.length>0?confirm("\xBFCancelar? Se perder\xE1n los productos agregados.")&&this.router.navigate(["/mesero/dashboard"]):this.router.navigate(["/mesero/dashboard"])}limpiarCarrito(){confirm("\xBFLimpiar el carrito?")&&(this.carrito=[],this.calcularTotal())}prepararEnvioComanda(){if(this.carrito.length===0){alert("El carrito est\xE1 vac\xEDo");return}this.mostrarModalConfirmacion=!0}cerrarModalConfirmacion(){this.mostrarModalConfirmacion=!1}confirmarEnvioComanda(){this.mostrarModalConfirmacion=!1,this.enviarComanda()}obtenerNombreCocinero(){let t=this.cocineros.find(e=>String(e.idUsuario)===String(this.cocineroSeleccionado));return t&&(t.nombre||t.nombreCompleto)||""}static \u0275fac=function(e){return new(e||r)(v(w),v(J),v(H),v(G),v(A),v($),v(q))};static \u0275cmp=T({type:r,selectors:[["app-tomar-comanda"]],decls:22,vars:7,consts:[[1,"comanda-container"],[1,"decorative-corner","corner-tl"],[1,"decorative-corner","corner-tr"],[1,"decorative-corner","corner-bl"],[1,"decorative-corner","corner-br"],[1,"comanda-header"],[1,"container-fluid","px-3","px-md-4","py-3"],[1,"row","align-items-center","g-3"],[1,"col-12","col-lg-8"],[1,"d-flex","flex-wrap","align-items-center","gap-2","gap-md-3"],[1,"btn","btn-back","rounded-pill",3,"click"],[1,"mb-0"],["class","badge mesa-badge rounded-pill",4,"ngIf"],[1,"col-12","col-lg-4","text-lg-end"],["class","btn btn-limpiar rounded-pill",3,"click",4,"ngIf"],["class","loading",4,"ngIf"],["class","main-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"badge","mesa-badge","rounded-pill"],[1,"btn","btn-limpiar","rounded-pill",3,"click"],[1,"loading"],[1,"spinner"],[1,"main-content"],[1,"container-fluid","px-3","px-md-4","py-4"],[1,"row","g-3","g-lg-4"],[1,"productos-section","d-flex","flex-column","gap-3","gap-md-4"],[1,"search-box"],["type","text","placeholder","\u{1F50D} Buscar producto...",1,"form-control","search-input","rounded-pill","px-4","py-3",3,"ngModelChange","input","ngModel"],[1,"categorias-filter","d-flex","flex-wrap","gap-2"],[1,"btn","btn-categoria",3,"click"],["class","btn btn-categoria",3,"active","click",4,"ngFor","ngForOf"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-lg-2","row-cols-xl-3","g-3","g-md-4"],["class","col",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12","col-lg-4"],[1,"carrito-section"],[1,"carrito-container","rounded-4","p-3","p-md-4"],[1,"text-center","mb-3","pb-3"],["class","selector-cocinero rounded-3 p-3 mb-3",4,"ngIf"],["class","carrito-vacio py-5",4,"ngIf"],["class","carrito-items",4,"ngIf"],["class","carrito-footer pt-3 mt-3",4,"ngIf"],[1,"col"],[1,"card","producto-card","border-0","h-100",3,"click"],[1,"card-body","p-3","p-md-4"],[1,"producto-imagen","text-center","mb-3"],[1,"producto-icon"],[1,"producto-info"],[1,"producto-nombre","h5","mb-2"],["class","producto-descripcion small mb-3",4,"ngIf"],[1,"producto-footer","d-flex","justify-content-between","align-items-center","pt-2","border-top"],[1,"producto-precio","fs-5"],[1,"badge","btn-agregar","rounded-pill","px-3","py-2"],[1,"producto-descripcion","small","mb-3"],[1,"col-12"],[1,"empty-state","py-5"],[1,"selector-cocinero","rounded-3","p-3","mb-3"],[1,"form-label","mb-2","small"],[1,"form-select","select-cocinero","rounded-3","py-2","px-3",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","hint-text small mb-0 mt-2 rounded-2 p-2",4,"ngIf"],[3,"value"],[1,"hint-text","small","mb-0","mt-2","rounded-2","p-2"],[1,"carrito-vacio","py-5"],[1,"mb-2"],[1,"icon-vacio"],[1,"carrito-items"],["class","carrito-item rounded-3 p-3",4,"ngFor","ngForOf"],[1,"carrito-item","rounded-3","p-3"],[1,"item-header","d-flex","justify-content-between","align-items-start","mb-2"],[1,"h6","mb-0","flex-grow-1"],[1,"btn","btn-eliminar","btn-sm","ms-2","p-0",2,"width","28px","height","28px",3,"click"],[1,"item-precio","small","mb-2"],[1,"item-controles","d-flex","justify-content-between","align-items-center","gap-2","mb-2"],[1,"cantidad-controles","d-flex","align-items-center","gap-2","rounded-pill","px-2","py-1"],[1,"btn","btn-cantidad","btn-sm","p-0",2,"width","30px","height","30px",3,"click"],[1,"cantidad","px-2"],[1,"btn","btn-observaciones","btn-sm","rounded-pill","px-3","py-1",3,"click"],["class","item-observaciones rounded-2 p-2 mb-2",4,"ngIf"],[1,"item-subtotal","text-end","pt-2","border-top"],[1,"small"],[1,"item-observaciones","rounded-2","p-2","mb-2"],[1,"carrito-footer","pt-3","mt-3"],[1,"total-section","d-flex","justify-content-between","align-items-center","rounded-3","p-3","mb-3"],[1,"total-label"],[1,"total-valor"],[1,"acciones","d-flex","gap-2"],[1,"btn","btn-cancelar","rounded-pill","flex-fill","py-2",3,"click"],[1,"btn","btn-enviar","rounded-pill","flex-fill","py-2",3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-content","rounded-4",2,"width","90%","max-width","500px",3,"click"],[1,"modal-header","p-4"],[1,"h4","mb-0"],[1,"btn","btn-cerrar-modal","p-0",2,"width","35px","height","35px",3,"click"],[1,"modal-body","p-4"],["placeholder","Ej: Sin cebolla, t\xE9rmino medio, sin picante...","rows","4",1,"form-control","textarea-observaciones","rounded-3",3,"ngModelChange","ngModel"],[1,"modal-footer","p-4","d-flex","gap-2"],[1,"btn","btn-modal-cancelar","rounded-pill","flex-fill","py-2",3,"click"],[1,"btn","btn-modal-guardar","rounded-pill","flex-fill","py-2",3,"click"],[1,"modal-content","modal-confirmacion","rounded-4",2,"width","90%","max-width","600px",3,"click"],[1,"confirmacion-info","rounded-3","p-3","mb-3"],[1,"info-row","d-flex","justify-content-between","align-items-center","py-2"],[1,"info-row","total-row","d-flex","justify-content-between","align-items-center","py-3","mt-2"],[1,"fs-5"],[1,"productos-resumen","rounded-3","p-3","mb-3"],[1,"h6","mb-3"],[1,"list-unstyled","mb-0"],["class","mb-2",4,"ngFor","ngForOf"],[1,"confirmacion-texto","mb-0"],["class","obs fst-italic small",4,"ngIf"],[1,"obs","fst-italic","small"]],template:function(e,c){e&1&&(o(0,"div",0),k(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o(5,"header",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"button",10),b("click",function(){return c.cancelar()}),a(11," \u2190 Volver "),n(),o(12,"h1",11),a(13,"\u{1F4DD} Nueva Comanda"),n(),_(14,Z,2,1,"span",12)(15,ee,2,1,"span",12),n()(),o(16,"div",13),_(17,te,2,0,"button",14),n()()()(),_(18,oe,4,0,"div",15)(19,ue,23,10,"div",16)(20,_e,14,1,"div",17)(21,Ce,47,9,"div",17),n()),e&2&&(d(14),p("ngIf",c.mesaNumero),d(),p("ngIf",c.meseroNombre),d(2),p("ngIf",c.carrito.length>0),d(),p("ngIf",c.loading),d(),p("ngIf",!c.loading),d(),p("ngIf",c.mostrarModalObservaciones),d(),p("ngIf",c.mostrarModalConfirmacion))},dependencies:[F,D,V,R,U,W,j,L,z,B,N],styles:[`@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css";[_ngcontent-%COMP%]:root{--bs-primary: #d4a574;--bs-secondary: #b88652;--bs-success: #4caf50;--bs-danger: #e74c3c;--bs-warning: #ffc107;--bs-info: #42a5f5;--bs-light: #e0d5c7;--bs-dark: #0a0705;--bs-body-bg: #1a1410;--bs-body-color: #e0d5c7;--bs-border-color: rgba(212, 165, 116, .3);--bs-border-radius: 15px;--bs-font-sans-serif: "Cormorant Garamond", "Georgia", serif}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;overflow:hidden;font-family:var(--bs-font-sans-serif)}.comanda-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;max-height:100vh;overflow:hidden;background:linear-gradient(135deg,#2d1f16f2,#1a1410f2);position:relative}.comanda-container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 20% 30%,rgba(212,165,116,.08) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(212,165,116,.05) 0%,transparent 50%);pointer-events:none;z-index:0}.decorative-corner[_ngcontent-%COMP%]{position:fixed;width:120px;height:120px;border:1.5px solid rgba(212,165,116,.25);z-index:5;pointer-events:none}.corner-tl[_ngcontent-%COMP%]{top:15px;left:15px;border-right:none;border-bottom:none}.corner-tr[_ngcontent-%COMP%]{top:15px;right:15px;border-left:none;border-bottom:none}.corner-bl[_ngcontent-%COMP%]{bottom:15px;left:15px;border-right:none;border-top:none}.corner-br[_ngcontent-%COMP%]{bottom:15px;right:15px;border-left:none;border-top:none}.comanda-header[_ngcontent-%COMP%]{position:sticky;top:0;background:linear-gradient(135deg,#2d1f16fa,#1a1410fa);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid var(--bs-border-color);z-index:100;box-shadow:0 4px 30px #0000004d;flex-shrink:0}.comanda-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#e0b588;font-size:1.6rem;font-weight:400;letter-spacing:2px;margin:0}.btn-back[_ngcontent-%COMP%]{background:transparent;color:var(--bs-primary);border:1px solid rgba(212,165,116,.4);transition:all .3s ease}.btn-back[_ngcontent-%COMP%]:hover{background:#d4a5741a;border-color:var(--bs-primary);color:var(--bs-primary);transform:translate(-3px)}.mesa-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c89b68,#d4a574);color:#1a1410;font-weight:700;letter-spacing:1px}.btn-limpiar[_ngcontent-%COMP%]{background:#e74c3c33;color:#e57373;border:1px solid rgba(231,76,60,.4);transition:all .3s ease}.btn-limpiar[_ngcontent-%COMP%]:hover{background:#e74c3c4d;transform:scale(1.05);color:#e57373}.loading[_ngcontent-%COMP%]{text-align:center;padding:5rem 2rem;color:#e0b588}.spinner[_ngcontent-%COMP%]{border:3px solid rgba(212,165,116,.2);border-top:3px solid var(--bs-primary);border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;position:relative;z-index:10;min-height:0}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:14px}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1a1410cc;border-radius:10px;margin:5px;box-shadow:inset 0 0 10px #00000080}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#c89b68,#d4a574);border-radius:10px;border:2px solid rgba(26,20,16,.5);box-shadow:0 0 10px #d4a57480;transition:all .3s ease}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#d4a574,#e0b588);box-shadow:0 0 15px #d4a574cc}.main-content[_ngcontent-%COMP%]{scrollbar-width:auto;scrollbar-color:#d4a574 rgba(26,20,16,.8)}.search-input[_ngcontent-%COMP%]{background:#1a141099;border:1px solid var(--bs-border-color);color:#e0b588;transition:all .3s ease}.search-input[_ngcontent-%COMP%]::placeholder{color:#b8a89680}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--bs-primary);box-shadow:0 0 20px #d4a57433;background:#1a1410cc}.btn-categoria[_ngcontent-%COMP%]{padding:.7rem 1.5rem;background:#1a141099;border:1px solid var(--bs-border-color);border-radius:20px;color:#b8a896;font-weight:600;transition:all .3s ease}.btn-categoria[_ngcontent-%COMP%]:hover{background:#d4a5741a;border-color:var(--bs-primary);color:#e0b588}.btn-categoria.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c89b68,#d4a574);border-color:var(--bs-primary);color:#1a1410;box-shadow:0 4px 15px #d4a5744d}.producto-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2d1f16b3,#1a1410b3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--bs-border-color);cursor:pointer;transition:all .4s ease;position:relative;overflow:hidden}.producto-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(212,165,116,.1),transparent);transition:left .6s}.producto-card[_ngcontent-%COMP%]:hover:before{left:100%}.producto-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);border-color:var(--bs-primary);box-shadow:0 12px 35px #d4a5744d}.producto-icon[_ngcontent-%COMP%]{font-size:3rem;filter:drop-shadow(0 0 10px rgba(212,165,116,.3))}.producto-nombre[_ngcontent-%COMP%]{color:#e0b588;font-weight:600;letter-spacing:.5px}.producto-descripcion[_ngcontent-%COMP%]{color:#b8a896}.producto-precio[_ngcontent-%COMP%]{color:#e0b588;font-weight:700}.btn-agregar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c89b68,#d4a574);color:#1a1410;font-weight:700}.carrito-section[_ngcontent-%COMP%]{position:sticky;top:100px;height:fit-content;max-height:calc(100vh - 150px)}.carrito-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2d1f16e6,#1a1410e6);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid var(--bs-border-color);box-shadow:0 8px 30px #0006;display:flex;flex-direction:column;gap:1rem;max-height:calc(100vh - 150px);overflow:hidden}.carrito-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e0b588;font-weight:400;letter-spacing:2px;border-bottom:1px solid rgba(212,165,116,.2)}.selector-cocinero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4a5741f,#c89b682e);border:2px solid rgba(212,165,116,.35);position:relative;overflow:hidden;box-shadow:0 4px 20px #d4a57426}.selector-cocinero[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,#d4a574,transparent);opacity:.7}.selector-cocinero[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e0b588;font-weight:700;letter-spacing:1px;text-transform:uppercase;text-shadow:0 0 10px rgba(212,165,116,.3)}.select-cocinero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1410f2,#2d1f16f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(212,165,116,.5);color:#e0b588;font-weight:600;letter-spacing:.5px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);appearance:none;font-family:var(--bs-font-sans-serif);box-shadow:0 4px 15px #0000004d;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M5 7.5L10 12.5L15 7.5' stroke='%23d4a574' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 1rem center;background-size:22px}.select-cocinero[_ngcontent-%COMP%]:hover{border-color:#d4a574bf;background-color:#2d1f16;transform:translateY(-2px);box-shadow:0 6px 25px #d4a57466}.select-cocinero[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--bs-primary);box-shadow:0 0 0 4px #d4a57440,0 6px 25px #d4a57480;background-color:#1a1410}.select-cocinero[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#1a1410;color:#e0b588;font-weight:600}.hint-text[_ngcontent-%COMP%]{color:#e57373;font-weight:600;letter-spacing:.5px;background:#e74c3c2e;border-left:3px solid var(--bs-danger);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.75}}.carrito-vacio[_ngcontent-%COMP%]{text-align:center;color:#b8a896}.icon-vacio[_ngcontent-%COMP%]{font-size:4rem;opacity:.3;display:block}.carrito-items[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:1rem;padding-right:.5rem}.carrito-items[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.carrito-items[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1a141080;border-radius:8px}.carrito-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#c89b68,#d4a574);border-radius:8px;border:2px solid rgba(26,20,16,.3)}.carrito-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#d4a574,#e0b588)}.carrito-item[_ngcontent-%COMP%]{background:#1a141099;border:1px solid rgba(212,165,116,.2)}.carrito-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#e0b588;font-weight:600}.btn-eliminar[_ngcontent-%COMP%]{background:#e74c3c33;color:#e57373;border:1px solid rgba(231,76,60,.3);border-radius:50%;cursor:pointer;transition:all .3s ease}.btn-eliminar[_ngcontent-%COMP%]:hover{background:#e74c3c66;transform:scale(1.1)}.item-precio[_ngcontent-%COMP%]{color:#b8a896}.cantidad-controles[_ngcontent-%COMP%]{background:#1a141080;border:1px solid rgba(212,165,116,.2)}.btn-cantidad[_ngcontent-%COMP%]{background:transparent;color:var(--bs-primary);border:none;cursor:pointer;transition:all .3s ease}.btn-cantidad[_ngcontent-%COMP%]:hover{background:#d4a57433}.cantidad[_ngcontent-%COMP%]{color:#e0b588;font-weight:700}.btn-observaciones[_ngcontent-%COMP%]{background:transparent;color:#b8a896;border:1px solid var(--bs-border-color);cursor:pointer;transition:all .3s ease}.btn-observaciones[_ngcontent-%COMP%]:hover{border-color:var(--bs-primary);color:#e0b588;background:#d4a5741a}.item-observaciones[_ngcontent-%COMP%]{background:#d4a5741a;border-left:3px solid var(--bs-primary)}.item-observaciones[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#b8a896}.item-subtotal[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e0b588}.carrito-footer[_ngcontent-%COMP%]{border-top:1px solid var(--bs-border-color)}.total-section[_ngcontent-%COMP%]{background:#d4a5741a}.total-label[_ngcontent-%COMP%]{color:#b8a896;font-weight:700;letter-spacing:2px}.total-valor[_ngcontent-%COMP%]{color:#e0b588;font-weight:700;font-size:1.8rem;text-shadow:0 0 20px rgba(212,165,116,.4)}.btn-cancelar[_ngcontent-%COMP%], .btn-enviar[_ngcontent-%COMP%]{border:none;font-weight:700;cursor:pointer;transition:all .3s ease;letter-spacing:1px;text-transform:uppercase}.btn-cancelar[_ngcontent-%COMP%]{background:transparent;color:#b8a896;border:1px solid rgba(212,165,116,.4)}.btn-cancelar[_ngcontent-%COMP%]:hover{background:#d4a5741a;border-color:var(--bs-primary)}.btn-enviar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c89b68,#d4a574,#e0b588);color:#1a1410;box-shadow:0 6px 20px #d4a5744d}.btn-enviar[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 10px 30px #d4a57480}.btn-enviar[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(.5)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2d1f16fa,#1a1410fa);border:1px solid rgba(212,165,116,.4);box-shadow:0 20px 60px #00000080;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--bs-border-color)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e0b588;font-weight:400;letter-spacing:1px}.btn-cerrar-modal[_ngcontent-%COMP%]{background:transparent;color:#b8a896;border:none;cursor:pointer;border-radius:50%;transition:all .3s ease}.btn-cerrar-modal[_ngcontent-%COMP%]:hover{background:#d4a57433;color:#e0b588}.textarea-observaciones[_ngcontent-%COMP%]{background:#1a141099;border:1px solid var(--bs-border-color);color:#e0b588;font-family:inherit;resize:vertical;transition:all .3s ease}.textarea-observaciones[_ngcontent-%COMP%]::placeholder{color:#b8a89680}.textarea-observaciones[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--bs-primary);box-shadow:0 0 20px #d4a57433;background:#1a1410cc}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid var(--bs-border-color)}.btn-modal-cancelar[_ngcontent-%COMP%], .btn-modal-guardar[_ngcontent-%COMP%]{border:none;font-weight:700;cursor:pointer;transition:all .3s ease;letter-spacing:1px}.btn-modal-cancelar[_ngcontent-%COMP%]{background:transparent;color:#b8a896;border:1px solid rgba(212,165,116,.4)}.btn-modal-cancelar[_ngcontent-%COMP%]:hover{background:#d4a5741a}.btn-modal-guardar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c89b68,#d4a574);color:#1a1410}.btn-modal-guardar[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #d4a57466}.modal-confirmacion[_ngcontent-%COMP%]{max-width:600px}.confirmacion-info[_ngcontent-%COMP%]{background:#1a141080;border:1px solid rgba(212,165,116,.2)}.info-row[_ngcontent-%COMP%]{color:#b8a896;border-bottom:1px solid rgba(212,165,116,.1)}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e0b588}.total-row[_ngcontent-%COMP%]{border-top:2px solid var(--bs-border-color)}.productos-resumen[_ngcontent-%COMP%]{background:#1a14104d}.productos-resumen[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#e0b588}.productos-resumen[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b8a896}.confirmacion-texto[_ngcontent-%COMP%]{color:#e0b588;text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#b8a896;padding:3rem 1rem}@media (max-width: 1199.98px){.decorative-corner[_ngcontent-%COMP%]{width:100px;height:100px}}@media (max-width: 991.98px){.decorative-corner[_ngcontent-%COMP%]{width:80px;height:80px}.carrito-section[_ngcontent-%COMP%]{position:static;max-height:none}}@media (max-width: 767.98px){.decorative-corner[_ngcontent-%COMP%]{width:60px;height:60px}.corner-tl[_ngcontent-%COMP%], .corner-tr[_ngcontent-%COMP%]{top:10px}.corner-bl[_ngcontent-%COMP%], .corner-br[_ngcontent-%COMP%]{bottom:10px}.corner-tl[_ngcontent-%COMP%], .corner-bl[_ngcontent-%COMP%]{left:10px}.corner-tr[_ngcontent-%COMP%], .corner-br[_ngcontent-%COMP%]{right:10px}.comanda-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}}@media (max-width: 575.98px){.main-content[_ngcontent-%COMP%]::-webkit-scrollbar, .carrito-items[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}}`]})};export{K as TomarComandaComponent};
