import{a as Y}from"./chunk-3KOUY4YN.js";import"./chunk-2QYJB2GK.js";import"./chunk-XQHYLHBR.js";import{a as z,c as D,d as j,e as T,f as F,g as N,o as V,q as G,s as A}from"./chunk-ZOGK2PJU.js";import{$ as h,B as c,Da as I,F as u,G as P,K as p,O as s,P as n,Q as a,R as y,S as f,T as m,U as l,Z as r,_ as x,a as _,ba as M,ca as O,da as v,pa as w,qa as E,ra as k,s as b,t as C,ua as S}from"./chunk-BCLJKQU2.js";function B(o,e){if(o&1&&(n(0,"div",21),r(1),a()),o&2){let t=l();s("ngClass",t.tipoMensaje),c(),h(" ",t.mensaje," ")}}function R(o,e){if(o&1){let t=f();n(0,"button",22),m("click",function(){b(t);let g=l();return C(g.limpiarFormulario())}),r(1," Cancelar "),a()}}function L(o,e){o&1&&(n(0,"div",23),y(1,"div",24),n(2,"p"),r(3,"Cargando categor\xEDas..."),a()())}function q(o,e){if(o&1){let t=f();n(0,"tr")(1,"td"),r(2),a(),n(3,"td"),r(4),a(),n(5,"td"),r(6),a(),n(7,"td",28)(8,"div",30)(9,"button",31),m("click",function(){let g=b(t).$implicit,d=l(3);return C(d.editarCategoria(g))}),r(10," Editar "),a(),n(11,"button",32),m("click",function(){let g=b(t).$implicit,d=l(3);return C(d.eliminarCategoria(g.idCategoria))}),r(12," Eliminar "),a()()()()}if(o&2){let t=e.$implicit;c(2),x(t.idCategoria),c(2),x(t.nombre),c(2),x(t.descripcion||"-")}}function $(o,e){if(o&1&&(n(0,"table")(1,"thead")(2,"tr")(3,"th"),r(4,"ID"),a(),n(5,"th"),r(6,"Nombre"),a(),n(7,"th"),r(8,"Descripci\xF3n"),a(),n(9,"th",28),r(10,"Acciones"),a()()(),n(11,"tbody"),p(12,q,13,3,"tr",29),a()()),o&2){let t=l(2);c(12),s("ngForOf",t.categorias)}}function H(o,e){o&1&&(n(0,"div",33),r(1," No hay categor\xEDas registradas. \xA1Crea la primera! "),a())}function J(o,e){if(o&1&&(n(0,"div",25),p(1,$,13,1,"table",26)(2,H,2,0,"div",27),a()),o&2){let t=l();c(),s("ngIf",t.categorias.length>0),c(),s("ngIf",t.categorias.length===0)}}var W=class o{constructor(e,t){this.categoriaService=e;this.router=t}categoria={nombre:"",descripcion:""};categorias=[];modoEdicion=!1;categoriaEditando=null;loading=!1;mensaje="";tipoMensaje="";ngOnInit(){console.log("\u{1F37D}\uFE0F Componente Crear Categor\xEDa iniciado"),this.cargarCategorias()}cargarCategorias(){this.loading=!0,this.categoriaService.getAll().subscribe({next:e=>{console.log("\u{1F4E6} Datos RAW recibidos:",e),e.forEach(t=>{console.log(`Categor\xEDa: ${t.nombre}, ID: ${t.idCategoria}, Tipo: ${typeof t.idCategoria}`)}),this.categorias=e,this.loading=!1,console.log("\u2705 Categor\xEDas cargadas:",e.length)},error:e=>{console.error("\u274C Error al cargar categor\xEDas:",e),this.mostrarMensaje("Error al cargar las categor\xEDas","error"),this.loading=!1}})}guardarCategoria(){if(!this.categoria.nombre.trim()){this.mostrarMensaje("El nombre de la categor\xEDa es obligatorio","error");return}this.loading=!0,this.modoEdicion&&this.categoriaEditando?.idCategoria?this.actualizarCategoria():this.categoriaService.create(this.categoria).subscribe({next:e=>{console.log("\u2705 Categor\xEDa creada:",e),this.mostrarMensaje("Categor\xEDa creada exitosamente","success"),this.limpiarFormulario(),this.cargarCategorias(),this.loading=!1},error:e=>{console.error("\u274C Error al crear categor\xEDa:",e),this.mostrarMensaje("Error al crear la categor\xEDa","error"),this.loading=!1}})}actualizarCategoria(){this.categoriaEditando?.idCategoria&&this.categoriaService.update(this.categoriaEditando.idCategoria,this.categoria).subscribe({next:e=>{console.log("\u2705 Categor\xEDa actualizada:",e),this.mostrarMensaje("Categor\xEDa actualizada exitosamente","success"),this.limpiarFormulario(),this.cargarCategorias(),this.loading=!1},error:e=>{console.error("\u274C Error al actualizar categor\xEDa:",e),this.mostrarMensaje("Error al actualizar la categor\xEDa","error"),this.loading=!1}})}editarCategoria(e){this.modoEdicion=!0,this.categoriaEditando=_({},e),this.categoria=_({},e),window.scrollTo({top:0,behavior:"smooth"})}eliminarCategoria(e){if(console.log("\u{1F5D1}\uFE0F ID recibido para eliminar:",e),console.log("Tipo de ID:",typeof e),!e||e===void 0){console.error("\u274C ID es undefined o null"),this.mostrarMensaje("Error: ID de categor\xEDa no v\xE1lido","error");return}confirm("\xBFEst\xE1s seguro de eliminar esta categor\xEDa?")&&(this.loading=!0,this.categoriaService.delete(e).subscribe({next:()=>{console.log("\u2705 Categor\xEDa eliminada"),this.mostrarMensaje("Categor\xEDa eliminada exitosamente","success"),this.cargarCategorias(),this.loading=!1},error:i=>{console.error("\u274C Error al eliminar categor\xEDa:",i),this.mostrarMensaje("Error al eliminar la categor\xEDa","error"),this.loading=!1}}))}limpiarFormulario(){this.categoria={nombre:"",descripcion:""},this.modoEdicion=!1,this.categoriaEditando=null}mostrarMensaje(e,t){this.mensaje=e,this.tipoMensaje=t,setTimeout(()=>{this.mensaje="",this.tipoMensaje=""},3e3)}volverAlDashboard(){this.router.navigate(["/dashboard-admin"])}static \u0275fac=function(t){return new(t||o)(u(Y),u(I))};static \u0275cmp=P({type:o,selectors:[["app-crear-categoria"]],decls:32,vars:9,consts:[[1,"container"],[1,"header"],[1,"header-content"],[1,"btn","btn-secondary",3,"click"],[1,"main-content"],[1,"content-card"],["class","message",3,"ngClass",4,"ngIf"],[1,"form-section"],[3,"ngSubmit"],[1,"form-grid"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","placeholder","Ej: Bebidas, Entradas, Platos Fuertes...","maxlength","50","required","",3,"ngModelChange","ngModel"],["for","descripcion"],["type","text","id","descripcion","name","descripcion","placeholder","Descripci\xF3n breve de la categor\xEDa...","maxlength","200",3,"ngModelChange","ngModel"],[1,"btn-group"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],[1,"table-section"],["class","loading",4,"ngIf"],["class","table-wrapper",4,"ngIf"],[1,"message",3,"ngClass"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"loading"],[1,"spinner"],[1,"table-wrapper"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"actions"],[1,"btn","btn-edit","btn-small",3,"click"],[1,"btn","btn-danger","btn-small",3,"click"],[1,"empty-state"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),r(4,"\u25C6 Gesti\xF3n de Categor\xEDas \u25C6"),a(),n(5,"button",3),m("click",function(){return i.volverAlDashboard()}),r(6," Volver al Dashboard "),a()()(),n(7,"main",4)(8,"div",5),p(9,B,2,2,"div",6),n(10,"section",7)(11,"h2"),r(12),a(),n(13,"form",8),m("ngSubmit",function(){return i.guardarCategoria()}),n(14,"div",9)(15,"div",10)(16,"label",11),r(17,"Nombre de la Categor\xEDa"),a(),n(18,"input",12),v("ngModelChange",function(d){return O(i.categoria.nombre,d)||(i.categoria.nombre=d),d}),a()(),n(19,"div",10)(20,"label",13),r(21,"Descripci\xF3n (opcional)"),a(),n(22,"input",14),v("ngModelChange",function(d){return O(i.categoria.descripcion,d)||(i.categoria.descripcion=d),d}),a()()(),n(23,"div",15)(24,"button",16),r(25),a(),p(26,R,2,0,"button",17),a()()(),n(27,"section",18)(28,"h2"),r(29,"Listado de Categor\xEDas"),a(),p(30,L,4,0,"div",19)(31,J,3,2,"div",20),a()()()()),t&2&&(c(9),s("ngIf",i.mensaje),c(3),x(i.modoEdicion?"Editar Categor\xEDa":"Nueva Categor\xEDa"),c(6),M("ngModel",i.categoria.nombre),c(4),M("ngModel",i.categoria.descripcion),c(2),s("disabled",i.loading),c(),h(" ",i.modoEdicion?"Actualizar Categor\xEDa":"Guardar Categor\xEDa"," "),c(),s("ngIf",i.modoEdicion),c(4),s("ngIf",i.loading),c(),s("ngIf",!i.loading))},dependencies:[S,w,E,k,A,N,z,D,j,V,G,F,T],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;overflow:hidden}[_nghost-%COMP%]{display:block;height:100%;--primary: #d4a574;--secondary: #b88652;--accent: #e0b588;--text: #e0d5c7;--text-light: #c9b8a6;--bg-dark: #0a0705;--bg-medium: #1a1410;--bg-card: rgba(26, 20, 16, .9);--shadow-glow: 0 8px 32px rgba(212, 165, 116, .25)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;max-height:100vh;overflow:hidden;font-family:Cormorant Garamond,Georgia,serif;background:linear-gradient(135deg,#1a1410,#2d1f16,#1a1410);position:relative}.container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background:radial-gradient(circle,rgba(212,165,116,.03) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_moveBackground 20s linear infinite;z-index:0;pointer-events:none}@keyframes _ngcontent-%COMP%_moveBackground{0%{transform:translate(0)}to{transform:translate(50px,50px)}}.header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;background:linear-gradient(135deg,#2d1f16f2,#1a1410f2);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(212,165,116,.4);box-shadow:0 0 60px #d4a57433;padding:30px 40px;flex-shrink:0}.header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--primary) 50%,transparent);opacity:.3;animation:_ngcontent-%COMP%_shimmer 3s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%,to{opacity:.3}50%{opacity:1}}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1600px;margin:0 auto;gap:20px;flex-wrap:wrap}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--accent);font-size:2.25rem;font-weight:300;letter-spacing:3px;text-shadow:0 0 30px rgba(212,165,116,.5);margin:0}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:40px 20px;position:relative;z-index:10;min-height:0}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1a141066;border-radius:10px;margin:5px}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--primary),var(--secondary));border-radius:10px;border:3px solid rgba(26,20,16,.4);transition:all .3s ease}.main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,var(--accent),var(--primary));border-color:#1a141033;box-shadow:0 0 10px #d4a57480}.main-content[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:var(--primary) rgba(26,20,16,.3)}.content-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2d1f16d9,#1a1410d9);padding:40px;border-radius:20px;border:1px solid rgba(212,165,116,.4);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 0 60px #d4a57433;position:relative;z-index:1;max-width:1600px;margin:0 auto;animation:_ngcontent-%COMP%_fadeIn .6s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.message[_ngcontent-%COMP%]{padding:15px 20px;border-radius:10px;margin-bottom:25px;font-size:14px;letter-spacing:.5px;animation:_ngcontent-%COMP%_slideDown .4s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.message.success[_ngcontent-%COMP%]{background:#4caf5026;color:#81c784;border:1px solid rgba(76,175,80,.3)}.message.error[_ngcontent-%COMP%]{background:#f4433626;color:#e57373;border:1px solid rgba(244,67,54,.3)}.form-section[_ngcontent-%COMP%]{margin-bottom:40px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary);font-size:1.5rem;font-weight:400;margin-bottom:25px;letter-spacing:2px;border-bottom:2px solid rgba(212,165,116,.3);padding-bottom:15px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px;margin-bottom:20px;max-width:600px}.form-group[_ngcontent-%COMP%]{margin-bottom:0}label[_ngcontent-%COMP%]{display:block;color:var(--primary);font-size:13px;margin-bottom:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase}input[type=text][_ngcontent-%COMP%], input[type=tel][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:14px 18px;border:1px solid rgba(212,165,116,.3);border-radius:10px;font-size:15px;background:#1a141080;transition:all .4s ease;color:var(--text);font-family:Cormorant Garamond,Georgia,serif}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#b8a89680}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);background:#1a1410cc;box-shadow:0 0 20px #d4a57433}select[_ngcontent-%COMP%]{cursor:pointer}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:var(--bg-medium);color:var(--text)}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:10px;font-size:14px;font-weight:700;cursor:pointer;transition:all .4s ease;text-transform:uppercase;letter-spacing:1.5px;font-family:Cormorant Garamond,Georgia,serif}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c89b68,#d4a574,#e0b588);color:var(--bg-medium);box-shadow:0 5px 20px #d4a5744d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 8px 30px #d4a57480}.btn-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--primary);border:2px solid var(--primary)}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d4a5741a;transform:translateY(-2px)}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c85050,#e05555);color:#fff;box-shadow:0 5px 20px #c850504d}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 8px 30px #c8505080}.btn-edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5e8cc8,#6ba3e0);color:#fff;box-shadow:0 5px 20px #5e8cc84d}.btn-edit[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #5e8cc880}.btn-small[_ngcontent-%COMP%]{padding:8px 16px;font-size:12px}.btn-group[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-start;flex-wrap:wrap}.table-section[_ngcontent-%COMP%]{margin-top:40px}.table-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary);font-size:1.5rem;font-weight:400;margin-bottom:25px;letter-spacing:2px;border-bottom:2px solid rgba(212,165,116,.3);padding-bottom:15px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;border-radius:10px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#1a14104d}thead[_ngcontent-%COMP%]{background:#d4a57433}th[_ngcontent-%COMP%]{padding:15px;text-align:left;color:var(--accent);font-weight:700;letter-spacing:1px;text-transform:uppercase;font-size:13px;border-bottom:2px solid rgba(212,165,116,.3);white-space:nowrap}td[_ngcontent-%COMP%]{padding:15px;color:var(--text);border-bottom:1px solid rgba(212,165,116,.1)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#d4a5741a}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--text-light);font-style:italic;font-size:1.1rem}.loading[_ngcontent-%COMP%]{text-align:center;color:var(--primary);padding:40px 20px}.spinner[_ngcontent-%COMP%]{border:3px solid rgba(212,165,116,.2);border-top:3px solid var(--primary);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 15px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (min-width: 1400px){.content-card[_ngcontent-%COMP%]{padding:50px}}@media (max-width: 1024px){.header[_ngcontent-%COMP%]{padding:25px 30px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.content-card[_ngcontent-%COMP%]{padding:30px}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{padding:20px}.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem}.content-card[_ngcontent-%COMP%]{padding:20px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.btn-group[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{flex-direction:column}.table-wrapper[_ngcontent-%COMP%]{font-size:14px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}}@media (max-width: 480px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;letter-spacing:2px}.main-content[_ngcontent-%COMP%]{padding:20px 15px}.content-card[_ngcontent-%COMP%]{padding:15px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .table-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:14px;padding:12px 15px}.btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:12px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;font-size:12px}}']})};export{W as CrearCategoriaComponent};
